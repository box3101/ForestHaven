---
import { fetchNavigationMenus } from "../utils/api.js";

// ì„œë²„ ì‚¬ì´ë“œì—ì„œ ë°ì´í„° fetch
const navigationMenus = await fetchNavigationMenus();


// ğŸ‘‡ í˜„ì¬ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
const currentPath = Astro.url.pathname;


---



<ul class="gnb" id="gnb" tabindex="0">

	{
		navigationMenus.map((menu) => {
			// í˜„ì¬ ê²½ë¡œê°€ ë©”ì¸ ë§í¬ ë˜ëŠ” ì„œë¸Œë©”ë‰´ ì¤‘ í•˜ë‚˜ë¼ë„ í¬í•¨í•˜ë©´ on í™œì„±í™”
			const isMainActive = currentPath.includes(`/${menu.mainLink}`);
			const isSubActive = menu.subMenus.some(sub => currentPath.includes(`/${sub.link}`));
			const isActive = isMainActive || isSubActive;

			return (
				<li class="gnbItem">
					<a 
						href={`../${menu.mainLink}.html`} 
						class:list={['gnbLink', { on: isActive }]}
						data-text={menu.mainTitle}
					>
						{menu.mainTitle}
					</a>
					<ul class="subPanel">
						{menu.subMenus.map((subMenu) => (
							<li>
								<a 
									href={`../${subMenu.link}.html`}
									class:list={{ on: currentPath.includes(`/${subMenu.link}`) }}
								>
									{subMenu.title}
								</a>
							</li>
						))}
					</ul>
				</li>
			)
		})
	}
</ul>
